{{#each snapshotBlocks as |block index|}}
  <div data-test-snapshot-block>
  {{#if (is-item-array block)}}
    {{snapshot-group
      build=build
      snapshots=block
      allDiffsShown=allDiffsShown
      activeSnapshotBlockId=activeSnapshotBlockId
      shouldDeferRendering=shouldDeferRendering
      showSnapshotFullModalTriggered=showSnapshotFullModalTriggered
      createReview=createReview
      updateActiveSnapshotBlockId=(action "updateActiveSnapshotBlockId")
      activeBrowser=activeBrowser
      updateActiveBrowser=updateActiveBrowser
      isBuildApprovable=isBuildApprovable
      createCommentThread=createCommentThread
      createComment=createComment
      closeCommentThread=closeCommentThread
      index=index
    }}
  {{else}}
    {{snapshot-viewer
      class="data-test-snapshot-viewer"
      build=build
      snapshot=block
      allDiffsShown=allDiffsShown
      activeSnapshotBlockId=activeSnapshotBlockId
      shouldDeferRendering=shouldDeferRendering
      showSnapshotFullModalTriggered=showSnapshotFullModalTriggered
      createReview=createReview
      updateActiveSnapshotBlockId=(action "updateActiveSnapshotBlockId")
      activeBrowser=activeBrowser
      updateActiveBrowser=updateActiveBrowser
      isBuildApprovable=isBuildApprovable
      createCommentThread=createCommentThread
      createComment=createComment
      closeCommentThread=closeCommentThread
      index=index
    }}
  {{/if}}
  </div>
{{/each}}

{{#if numSnapshotsUnchanged}}
  {{#if (not isUnchangedSnapshotsVisible)}}
    <div class="SnapshotViewer--actionable">
      <div class="flex items-center justify-center font-bold p-2 m-2 bg-secondary rounded border border-dashed cursor-pointer" data-test-toggle-unchanged {{action toggleUnchangedSnapshotsVisible}}>
        {{#if isUnchangedSnapshotsLoading}}
          {{inline-svg "loader-icon" class="mx-2"}} Loading unchanged snapshots
        {{else}}
          <figure class="svg-container">
            {{inline-svg "no-comparison-group-icon" class="mr-1"}}
          </figure>
           <div class="text-blue-500">
            {{pluralize numSnapshotsUnchanged "unchanged snapshot"}}
            {{#if build.hasMultipleBrowsers}}
              in {{activeBrowser.familyName}}
            {{else}}
              for all widths.
            {{/if}}
          </div>
        {{/if}}
      </div>
    </div>
  {{else}}
    {{#each snapshotsUnchanged as |snapshot|}}
      <div data-test-snapshot-block>
        {{snapshot-viewer
          build=build
          allDiffsShown=allDiffsShown
          snapshot=snapshot
          activeSnapshotBlockId=activeSnapshotBlockId
          shouldDeferRendering=shouldDeferRendering
          showSnapshotFullModalTriggered=showSnapshotFullModalTriggered
          createReview=createReview
          updateActiveSnapshotBlockId=(action "updateActiveSnapshotBlockId")
          activeBrowser=activeBrowser
          updateActiveBrowser=updateActiveBrowser
          isBuildApprovable=isBuildApprovable
          closeCommentThread=closeCommentThread
          createCommentThread=createCommentThread
          createComment=createComment
        }}
      </div>
    {{/each}}
  {{/if}}
{{/if}}
