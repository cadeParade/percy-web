<ReSizable
  class="snapshot-name-list-sidebar {{unless this.isSnapshotListVisible 'hidden'}}"
  @width={{this.sidebarWidth}}
  @minWidth="180"
  @maxWidth="480"
  @directions={{array 'right'}}
  @onResize={{action "onResize"}}
  @onResizeStop={{action "onResizeStop"}}
>
  <div class="py-3 leading-none bg-primary border-b">
    <div class="{{if this.isCompactSidebar 'px-2' 'px-3'}}">
      <div class="flex items-center mb-1-1/2">
        <div class="flex items-center text-sm font-bold">
          <LinkTo @route="organization" @model={{this.build.project.organization}} class="link-purple hide-on-tablet">
            {{this.build.project.organization.name}}
          </LinkTo>
          <span class="font-bold text-secondary mx-sm hide-on-tablet">/</span>
          <LinkTo @route="organization.project" @models={{array this.build.project.organization.slug this.build.project.slug}} class="link-purple">
            {{this.build.project.name}}
          </LinkTo>
        </div>
        {{#if this.build.project.organization.isSponsored}}
          <FaIcon @icon="globe" class="text-blue-500 ml-sm mr-3 pb-px" />
        {{/if}}
      </div>

      <div class="text-lg text-secondary mb-2">
        Build <span class="font-mono font-normal tracking-sm text-primary mr-1">{{this.build.buildNumber}}</span>
      </div>

      {{!-- <div class="text-lg mb-sm">
        <span class="font-semibold">{{this.build.totalSnapshotsUnreviewed}}</span> {{pluralize this.build.totalSnapshotsUnreviewed "unreviewed change" without-count=true}}
      </div>
      <div class="mb-3">
        <span class="text-primary font-semibold">{{this.build.totalSnapshots}}</span> {{pluralize this.build.totalSnapshots "total snapshot" without-count=true}}
      </div> --}}

      {{!-- <Build2::BuildApprovalButton @build={{this.build}} /> --}}

      <div class="flex justify-between mb-sm">
        <button type="button" class="percy-btn btn-square {{if this.isFilterOpen 'filter-dropdown-active'}}" {{action "toggleFilters"}}>
          <ThemeSvg @svg="filter" />
        </button>

        <button type="button" class="btn-icon-only opacity-25 hover:opacity-100 cursor-pointer" {{action this.toggleSearchInput}}>
          <ThemeSvg @svg="search-icon" />
        </button>
      </div>
    </div>

    {{#if this.isFilterOpen}}
      <div class="-mb-3 bg-secondary border-t text-sm font-semibold">
        <div class="border-b {{if this.isCompactSidebar 'p-2' 'p-3'}}">
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>Unreviewed</div>
            <div class="px-sm py-px rounded-xl bg-purple-600 leading-none">26</div>
          </div>
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>Changes requested</div>
            <div class="px-sm py-px rounded-xl bg-orange-500 leading-none">3</div>
          </div>
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>Approved</div>
            <div class="px-sm py-px rounded-xl bg-green-500 leading-none">18</div>
          </div>
          <div class="flex items-center justify-between cursor-pointer opacity-25">
            <div>No changes</div>
            <div class="px-sm py-px rounded-xl bg-blue-500 leading-none">264</div>
          </div>
        </div>

        <div class="border-b {{if this.isCompactSidebar 'p-2' 'p-3'}}">
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>Chrome</div>
            <div></div>
          </div>
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>Firefox</div>
            <div></div>
          </div>
          <div class="flex items-center justify-between cursor-pointer opacity-25">
            <div>Edge</div>
            <div>
              <ThemeSvg @svg="hidden"/>
            </div>
          </div>
        </div>

        <div class="{{if this.isCompactSidebar 'p-2' 'p-3'}}">
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>375px</div>
            <div></div>
          </div>
          <div class="flex items-center justify-between mb-1 cursor-pointer">
            <div>768px</div>
            <div></div>
          </div>
          <div class="flex items-center justify-between mb-1 cursor-pointer opacity-25">
            <div>1100px</div>
            <div>
              <ThemeSvg @svg="hidden"/>
            </div>
          </div>
          <div class="flex items-center justify-between cursor-pointer">
            <div>1280px</div>
            <div></div>
          </div>
        </div>
      </div>
    {{/if}}

    {{#if this.isSearchVisible}}
      <div class="relative mb-2 mt-1">
        <Input
          @type="text"
          @value={{this.searchTerm}}
          @key-up={{action this.updateSearchTerm}}
          placeholder="Search snapshots"
          class="bg-code w-full rounded h-10 m-0 pl-1-1/2 pr-5 focus:outline-none"
        />
        <button type="button" class="btn-icon-only absolute hover:opacity-100 {{if (is-empty this.searchTerm) 'opacity-0 pointer-events-none' 'opacity-25'}}" style="top: 5px; right: 8px;" {{action this.clearSearchTerm}}>
          <ThemeSvg @svg="clear-search"/>
        </button>
      </div>
    {{/if}}
  </div>

  <Build2::SnapshotNameList
    style="scroll-behavior: smooth;"
    class="flex-1 pt-3 overflow-scroll"
    id="snapshot-list-sidebar"
    @snapshots={{this.snapshots}}
    @build={{this.buildModel}}
    @searchTerm={{this.searchTerm}}
    @isCompactSidebar={{this.isCompactSidebar}}
  />

  <div class="py-1 bg-primary border-t border-ternary text-center font-semibold {{if this.isCompactSidebar 'px-2' 'px-3'}}">
    2 <span class="text-secondary font-normal">of</span> 47
  </div>
</ReSizable>
